<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o="urn:schemas-microsoft-com:office:office"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="__STYLE__"></link><meta name="GENERATOR" content="MSHTML 9.00.8112.16457"></meta><style>A:link {
	COLOR: #0000ff; FONT-WEIGHT: bold; TEXT-DECORATION: underline
}
A:visited {
	COLOR: #0000ff; FONT-WEIGHT: bold; TEXT-DECORATION: underline
}
A:hover {
	TEXT-DECORATION: underline
}
H1 {
	TEXT-ALIGN: left; FONT-FAMILY: Ariall, Tahoma; COLOR: #003366; FONT-SIZE: 18pt; FONT-WEIGHT: bold
}
H2 {
	TEXT-ALIGN: left; FONT-FAMILY: Arial, Tahoma; FONT-SIZE: 14pt; FONT-WEIGHT: bold
}
H3 {
	TEXT-ALIGN: left; FONT-FAMILY: Arial, Tahoma; FONT-SIZE: 12pt; FONT-WEIGHT: bold
}
TABLE {
	FONT-SIZE: x-small
}
TABLE .Programtext {
	PADDING-BOTTOM: 10px; BACKGROUND-COLOR: #f0f0f0; PADDING-LEFT: 10px; PADDING-RIGHT: 10px; COLOR: #0000ff; PADDING-TOP: 10px
}
BODY {
	FONT-FAMILY: Verdana; FONT-SIZE: x-small
}
.withBorder {
	TEXT-ALIGN: left; FONT-FAMILY: Verdana; FONT-SIZE: x-small; BORDER-TOP: #ffd700 1px solid; BORDER-RIGHT: #ffd700 1px solid
}
.withBorder TD {
	BORDER-BOTTOM: #ffd700 1px solid; BORDER-LEFT: #ffd700 1px solid
}
.withBorder TH {
	BORDER-BOTTOM: #ffd700 1px solid; BORDER-LEFT: #ffd700 1px solid; BACKGROUND-COLOR: #ffffee
}
UL.TOC LI {
	LIST-STYLE-TYPE: none
}
.Programtext {
	FONT-FAMILY: Courier; COLOR: #000080; FONT-SIZE: 10pt
}
PRE.Query {
	FONT-FAMILY: Courier; COLOR: #000080; FONT-SIZE: 10pt
}
PRE.xml {
	FONT-FAMILY: Courier; COLOR: #000080; FONT-SIZE: 10pt
}
PRE.vbcode {
	FONT-FAMILY: Courier; COLOR: #000080; FONT-SIZE: 10pt
}
PRE {
	FONT-SIZE: 10pt
}
.Marker {
	BACKGROUND-COLOR: #ffff00
}
.heading {
	BORDER-BOTTOM: #ffd700 1px solid; BORDER-LEFT: #ffd700 1px solid; BACKGROUND-COLOR: #ffffee; FONT-WEIGHT: bold
}
.tip {
	PADDING-BOTTOM: 15px; BORDER-RIGHT-WIDTH: 0px; BACKGROUND-COLOR: #eeffee; PADDING-LEFT: 15px; WIDTH: 95%; PADDING-RIGHT: 15px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; PADDING-TOP: 15px
}
.tip TD {
	PADDING-BOTTOM: 15px; BORDER-RIGHT-WIDTH: 0px; BACKGROUND-COLOR: #eeffee; PADDING-LEFT: 15px; WIDTH: 95%; PADDING-RIGHT: 15px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; PADDING-TOP: 15px
}
.important {
	PADDING-BOTTOM: 15px; BORDER-RIGHT-WIDTH: 0px; BACKGROUND-COLOR: #ffeeee; PADDING-LEFT: 15px; WIDTH: 95%; PADDING-RIGHT: 15px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; PADDING-TOP: 15px
}
.important TD {
	PADDING-BOTTOM: 15px; BORDER-RIGHT-WIDTH: 0px; BACKGROUND-COLOR: #ffeeee; PADDING-LEFT: 15px; WIDTH: 95%; PADDING-RIGHT: 15px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; PADDING-TOP: 15px
}
.note {
	PADDING-BOTTOM: 15px; BORDER-RIGHT-WIDTH: 0px; BACKGROUND-COLOR: #eeeeff; PADDING-LEFT: 15px; WIDTH: 95%; PADDING-RIGHT: 15px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; PADDING-TOP: 15px
}
.note TD {
	PADDING-BOTTOM: 15px; BORDER-RIGHT-WIDTH: 0px; BACKGROUND-COLOR: #eeeeff; PADDING-LEFT: 15px; WIDTH: 95%; PADDING-RIGHT: 15px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; PADDING-TOP: 15px
}
.k {
	COLOR: red
}
.c {
	COLOR: green
}
.s {
	COLOR: black
}
.n {
	COLOR: black
}
.p {
	COLOR: brown
}
OL LI {
	MARGIN-BOTTOM: 12pt
}
</style></head><body>
<div align="left"><nobr>  </nobr></div>
<h1>Обработчики "Правила конвертации объектов"</h1>
<h2>При выгрузке</h2>
<h3>Условия возникновения события</h3>
<p>Событие выполняется при выгрузке каждого объекта в файл обмена, не зависимо от того как выгружается объект по правилу выгрузки данных либо потому что на него есть ссылки. Событие вызывается, когда узел объекта приемника уже создан и доступен для изменения. </p>
<h3>Параметры:</h3>
<p>Источник - Произвольный - выгружаемый объект источник (ссылка или произвольные данные)</p>
<p>ВходящиеДанные - Произвольный - произвольные вспомогательные данные, переданные правилу конвертации из других правил (например из правила выгрузки данных или правила конвертации свойств). Значение параметра, как правило, имеет тип Структура, где ключи значений соответствуют структуре свойств объекта приемника. Таким образом, при конвертации свойств (в правиле конвертации свойств), конвертируемые данные (или часть данных) могут быть получены из этого параметра.</p>
<p>ИсходящиеДанные - Произвольный - произвольные вспомогательные данные. Данные передаются по следующим правилам:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><span style="WIDOWS: 2; TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; LETTER-SPACING: normal; DISPLAY: inline !important; FONT: 12px Tahoma, Verdana, Arial, Helvetica, sans-serif; WHITE-SPACE: normal; ORPHANS: 2; FLOAT: none; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
<p style="TEXT-INDENT: -18pt; MARGIN-LEFT: 36pt; mso-list: l0 level1 lfo1; tab-stops: list 36.0pt"><font style="BACKGROUND-COLOR: #ffffff"><font size="+0"><font size="+0"><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt; mso-fareast-font-family: Verdana; mso-bidi-font-family: Verdana"><span style="mso-list: Ignore">1.<span style="FONT: 7pt 'Times New Roman'"> </span></span></span><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt">ПВД.ИсходящиеДанные -&gt; ПКО.ВходящиеДанные</span></font></font><o:p></o:p></font></p></span>
<p style="TEXT-INDENT: -18pt; MARGIN-LEFT: 36pt; mso-list: l0 level1 lfo1; tab-stops: list 36.0pt"><font style="BACKGROUND-COLOR: #ffffff"><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt; mso-fareast-font-family: Verdana; mso-bidi-font-family: Verdana"><span style="mso-list: Ignore">2.<span style="FONT: 7pt 'Times New Roman'"> </span></span></span><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt">ПКО.ВходящиеДанные -&gt; ПКС.ВходящиеДанные</span></font></p>
<p style="TEXT-INDENT: -18pt; MARGIN-LEFT: 36pt; mso-list: l0 level1 lfo1; tab-stops: list 36.0pt"><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt"></span><font style="BACKGROUND-COLOR: #ffffff"><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt; mso-fareast-font-family: Verdana; mso-bidi-font-family: Verdana"><span style="mso-list: Ignore">3.<span style="FONT: 7pt 'Times New Roman'"> </span></span></span><span style="FONT-FAMILY: Verdana; FONT-SIZE: 10pt">ПКС.ИсходящиеДанные -&gt; ПКО.ВходящиеДанные</span></font></p></blockquote>
<p>ИмяПКО - Имя данного правила конвертации объектов</p>
<p>ПКО - ссылка на данное правило конвертации объектов</p>
<p>ВыгруженныеОбъекты - Соответствие.  Содержит перечень выгруженных по данному правилу объектов. Ключом соответствия является параметр КлючВыгружаемыхДанных, значением - число-номер объекта в файле. Может использоваться для проверки - выгружен ли объект по ссылкам из других объектов. В целях оптимизации, при выгрузке больших массивов данных, значение параметра может быть очищено - например в обработчике ПослеОбработкиПравилаВыгрузкиДанных.</p>
<p>КлючВыгружаемыхДанных – значение ключа в соответствии «ВыгруженныеОбъекты». Только для платформы 1С:Предприятие 8.</p>
<p>Отказ – Булево. Если Истина, то объект выгружаться не будет.</p>
<p>СтандартнаяОбработка - Булево - Если установить значение Ложь, то стандартное заполнение Приемника не производится, то есть не выполняется обработка правил конвертации свойств.</p>
<p>Приемник - инициализированный xml-узел объекта приемника. Может быть дополнен призвольным xml-содержимым, например используемым при загрузке. В случае отключения СтандартнойОбработки, правила конвертации свойств (ПКС) не обрабатываются, т.е. необходимо реализовать алгоритм заполняющий узел приемника в соответствии с форматом файла обмена</p>
<p>УзелСсылки - инициализированный xml-узел ссылки. Может использоваться, например для инициализации свойств других объектов.</p>
<h3>Пример:</h3>
<p>ИнформацияОПользователе = СоздатьУзел("ИнформацияОПользователе"); <br>УстановитьАтрибут(ИнформацияОПользователе, "АутентификацияОС", Источник.АутентификацияОС);<br>УстановитьАтрибут(ИнформацияОПользователе, "АутентификацияСтандартная", Источник.АутентификацияСтандартная);<br>УстановитьАтрибут(ИнформацияОПользователе, "ПоказыватьВСпискеВыбора", Источник.ПоказыватьВСпискеВыбора);<br>УстановитьАтрибут(ИнформацияОПользователе, "ПользовательОС", Источник.ПользовательОС);<br>УстановитьАтрибут(ИнформацияОПользователе, "ПолноеИмя", Источник.ПолноеИмя);<br>ЧислоРолей = 1;<br>Для Каждого Роль Из Источник.Роли Цикл<br> УстановитьАтрибут(ИнформацияОПользователе, "Роль"+ЧислоРолей, Роль.Имя);<br> Сообщить(Роль.Имя);<br> ЧислоРолей = ЧислоРолей + 1;<br>КонецЦикла;<br>ДобавитьПодчиненный(Приемник, ИнформацияОПользователе);</p></body></html>